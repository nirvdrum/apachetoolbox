notice "$MENUTRUE" "Setting up Mod_GZIP...\n"
cd $root/src
check_source "mod_gzip.c" "http://apachetoolbox.com/data/cvs/src/mod_gzip.c"
echo "

<IfModule mod_gzip.c>
################# Mod_GZIP ##################
# http://www.remotecommunications.com/apache/mod_gzip/
LogFormat \"%h %l %u %t \\"%r\\" %>s %b mod_gzip: %{mod_gzip_compression_ratio}npct.\" common_with_mod_gzip_info1
LogFormat \"%h %l %u %t \\"%r\\" %>s %b mod_gzip: %{mod_gzip_result}n In:%{mod_gzip_input_size}n Out:%{mod_gzip_output_size}n:%{mod_gzip_compression_ratio}npct.\" common_with_mod_gzip_info2
CustomLog logs/gzip.log common_with_mod_gzip_info2   

mod_gzip_on                 Yes
mod_gzip_minimum_file_size  300
mod_gzip_maximum_file_size  0
mod_gzip_maximum_inmem_size 100000
mod_gzip_keep_workfiles     No
# I suggest you make /usr/local/apache/gzip and use that instead
mod_gzip_temp_dir           /tmp
mod_gzip_item_include       file \.html$
mod_gzip_item_include       file \.jsp$
mod_gzip_item_include       file \.php$
mod_gzip_item_include       file \.pl$
mod_gzip_item_include       mime ^text/.*
mod_gzip_item_include       mime ^application/x-httpd-php
mod_gzip_item_include       mime ^httpd/unix-directory$
mod_gzip_item_include       handler ^perl-script$
mod_gzip_item_include       handler ^server-status$
mod_gzip_item_include       handler ^server-info$
mod_gzip_item_exclude       file \.css$
mod_gzip_item_exclude       file \.js$
mod_gzip_item_exclude       mime ^image/.*
################# Mod_GZIP ##################
</IfModule>

" >> $root/apache_$APACHE/conf/httpd.conf-dist
notice "$MENUTRUE" " Updated httpd.conf-dist for Mod_GZIP...\n"
cd $root
notice "$MENUTRUE" "Mod_GZIP setup\n"

APACHECFG="$APACHECFG --add-module=$root/src/mod_gzip.c $r"
